s = $(c) $(cpp)
d = $(c:%.c=%.d) $(cpp:%.cpp=%.d)
o = $(c:%.c=%.o) $(cpp:%.cpp=%.o)
so = $(o:%.o=%.so)

ifeq ($(system),macosx)
arflags = cr
else
arflags = crs
endif

ifeq (${buildshare},yes)
${root}/lib/libsword.a: $(o)
	$(CROSS_COMPILE)$(AR) $(arflags) $@ $(o)
ifneq (${mingw},yes)
	$(CROSS_COMPILE)$(CC) -fpic -shared -o ${root}/lib/libsword.so ${objdir}/*.so
endif

else
${root}/lib/libsword.a: $(o)
	$(CROSS_COMPILE)$(AR) $(arflags) $@ $(o)
ifeq ($(system),macosx)
	$(CROSS_COMPILE)ranlib -s $@
endif
endif


ifneq ($(nodeps),yes)
-include $(d)
endif
